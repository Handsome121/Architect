# Kafka

## 消息队列的两种模式

### 1、点对点模式

### 2、发布订阅模式

1、消费者主动拉取

2、队列主动推送

kafka中消息是以topic进行分类的，生产者生产消息，消费者消费消息，都是面向topic的。

topic是逻辑上的概念，而partition是物理上的概念，每个partition对应一个log文件，该log文件中存储的就是producer生产的数据，Producer生产的数据会被不断追加到该log文件末端，且每条数据都有自己的offset,消费者组中的每个消费者，都会实时记录自己消费到了哪个offset,以便出错恢复时，从上次的位置继续消费

由于生产者生产的消息不断追加到log文件末尾，为防止文件过大导致数据定位效率低下，kafka采取了分片和索引机制，将每个partition分为多个segment，每个segment对应两个文件-----.index文件和.log文件。这些文件位于一个文件夹下，命名规则为topic名称+分区序号



